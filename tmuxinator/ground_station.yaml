<%
# Input parameters
drone_namespace  = @settings["drone_namespace"]
keyboard_teleop   = @settings["keyboard_teleop"] == "true"
rviz              = @settings["rviz"] == "true"
%>

name: ground_station
attach: false
root: ./
windows:

  - mission:
      layout:
      panes:
    <%- drone_namespace.split(',').each do |drone| %>
        - ros2 run as2_alphanumeric_viewer as2_alphanumeric_viewer_node
            --ros-args -r  __ns:=/<%= drone %>
  - others:
      layout:
      panes:
      <%- if keyboard_teleop %>
        - ros2 launch as2_keyboard_teleoperation as2_keyboard_teleoperation_launch.py
            namespace:=<%= drone_namespace %>
            config_file:=ground_station/keyboard_teleop.yaml
            use_sim_time:=true
      <%- end %>
      <%- if rviz %>
        - ros2 launch as2_visualization swarm_viz.launch.py
            namespace_list:=<%= drone_namespace %>
            rviz_config:=ground_station/rviz2_config.rviz
      <%- end %>
